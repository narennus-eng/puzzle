<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Puzzleüíñ</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<style>
body {
  margin:0;
  font-family:'Poppins', sans-serif;
  background:linear-gradient(135deg,#ffd6e8,#ffe5b4);
  color:#6b2147;
  text-align:center;
}
.section {
  display:none;
  padding:40px 20px;
  min-height:100vh;
}
.active { display:block; }
input {
  padding:6px;
  margin:4px;
  border-radius:6px;
  border:1px solid #ff9ecf;
  width:90px;
  text-align:center;
}
button {
  padding:10px 20px;
  margin:10px;
  border:none;
  border-radius:20px;
  cursor:pointer;
  font-weight:600;
}
.green { background:#22c55e; color:white; }
.red { background:#ef4444; color:white; }
canvas {
  background:white;
  border-radius:20px;
}
</style>
</head>
<body>

<!-- PAGE 1 -->
<div id="page1" class="section active">
<h2>The Long-Term Plan üíº</h2>
<p>We have savings of <b>332,000 SGD</b> at year 7.<br>
We invest at <b>8%</b> annually.<br>
We save <b>132,000 SGD</b> per year thereafter.<br><br>
Ignoring inflation, how much will we have after <b>23.36 years</b>?</p>

<p>Fill in the formula: P= initial amount after 7 years, t= time after 7 years, r= rate, C= contribution pa after 7 years.</p>

<p>
\[
\text{Future value, }FV = P (1+ r)^{t+7} +
C \frac{(1+ r)^{t} -1}{r}
\]
</p>

<div>
<input id="P" placeholder="P">
<input id="r" placeholder="r">
<input id="t" placeholder="t">
<input id="C" placeholder="C">
</div>

<button onclick="checkFV()">Compute</button>
<p id="result"></p>
</div>

<!-- PAGE 2 -->
<div id="page2" class="section">
<h2>5.34 Million SGD üòå</h2>
<p>Damn. We'll reach a net worth of at least <b>5.34 million</b> in just 23 years.</p>
<p>Luxury villas in Singapore? ~3 million.<br>
Ferraris? ~1.5 million.<br>
Luxurious retirement for 20 years? ~2 million.</p>
<p><b>So woman, get geared up.<br>
We're on the right path.<br>
By 50, we'll definitely be RICH.</b></p>
<p>YOU'RE DOING GREAT. KEEP GOING.</p>

<button onclick="goToPage3()">Next</button>
</div>

<!-- PAGE 3 -->
<div id="page3" class="section">
<h2>Another Fact... ‚ù§Ô∏è</h2>
<p>5.34 units is also the numerical approximation of the area enclosed by:</p>
<p>\[(x^2 + y^2 - 1)^3 - x^2 y^3 = 0\]</p>
<p>Wanna see how this curve looks?</p>
<button onclick="startHeart()" class="green">Yes</button>
</div>

<!-- PAGE 4 -->
<div id="page4" class="section">
<canvas id="heartCanvas" width="600" height="600"></canvas>
<div id="insideText" style="display:none; position:relative; margin-top:-350px;">
<h2 style="color:#c9184a;">WILL YOU BE MY VALENTINE?</h2>
<button class="green" onclick="goToFinal()">YES</button>
<button class="red" onclick="goToFinal()">YES</button>
</div>
</div>

<!-- FINAL PAGE -->
<div id="final" class="section">
<h1>YAYYYYY!!!!!! üéâüíñ</h1>
</div>

<script>
function checkFV() {
  const P = parseFloat(document.getElementById('P').value);
  const r = parseFloat(document.getElementById('r').value);
  const t = parseFloat(document.getElementById('t').value);
  const C = parseFloat(document.getElementById('C').value);

  const FV = P*Math.pow(1+r,t) + C*((Math.pow(1+r,t)-1)/r);

  if(FV > 5300000 && FV < 5500000) {
    document.getElementById('page1').classList.remove('active');
    document.getElementById('page2').classList.add('active');
  } else {
    document.getElementById('result').innerText = "Check your numbers üòâ";
  }
}

function goToPage3() {
  document.getElementById('page2').classList.remove('active');
  document.getElementById('page3').classList.add('active');
}

function startHeart() {
  document.getElementById('page3').classList.remove('active');
  document.getElementById('page4').classList.add('active');
  drawGraphHeart();
}

function drawGraphHeart() {
  const canvas = document.getElementById('heartCanvas');
  const ctx = canvas.getContext('2d');

  let t = 0;

  function drawFrame(){
    ctx.clearRect(0,0,600,600);

    // draw grid
    ctx.save();
    ctx.strokeStyle="#eee";
    for(let i=0;i<=600;i+=50){
      ctx.beginPath(); ctx.moveTo(i,0); ctx.lineTo(i,600); ctx.stroke();
      ctx.beginPath(); ctx.moveTo(0,i); ctx.lineTo(600,i); ctx.stroke();
    }
    ctx.restore();

    ctx.save();
    ctx.translate(300,300);
    ctx.scale(20,-20);
    ctx.strokeStyle="red";
    ctx.lineWidth=0.08;

    ctx.beginPath();
    for(let i=0;i<=t;i+=0.01){
      const x=16*Math.pow(Math.sin(i),3);
      const y=13*Math.cos(i)-5*Math.cos(2*i)-2*Math.cos(3*i)-Math.cos(4*i);
      if(i===0) ctx.moveTo(x,y);
      else ctx.lineTo(x,y);
    }
    ctx.stroke();
    ctx.restore();

    t += 0.015; // slower tracing speed

    if(t <= Math.PI*2){
      requestAnimationFrame(drawFrame);
    } else {
      document.getElementById('insideText').style.display='block';
    }
  }

  drawFrame();
}

function goToFinal(){
  document.getElementById('page4').classList.remove('active');
  document.getElementById('final').classList.add('active');
}
</script>

</body>
</html>
